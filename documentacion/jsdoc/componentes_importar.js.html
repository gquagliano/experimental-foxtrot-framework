<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: componentes/importar.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: componentes/importar.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Copyright, 2020, Gabriel Quagliano. Bajo licencia Apache 2.0.
 * 
 * @author Gabriel Quagliano - gabriel.quagliano@gmail.com
 * @version 1.0
 */

 "use strict";

/**
 * @class Componente concreto Importar.
 */
var componenteImportar=function() { 
    this.componente="importar";
    this.elementoVista=null;
    this.nombreVista=null;
    this.instanciaControlador=null;

    this.propiedadesConcretas={
        "Importar":{
            vista:{
                etiqueta:"Vista",
                adaptativa:false
            },
            escucharNavegacion:{
                etiqueta:"Escuchar navegación",
                ayuda:"Determina si debe cambiar la vista cuando cambie la URL.",
                tipo:"bool",
                adaptativa:false
            },
            precarga:{
                etiqueta:"Mostrar precarga",
                adaptativa:false,
                tipo:"opciones",
                opciones:{
                    no:"No",
                    si:"Si",
                    barra:"Barra de progreso"
                }
            },
            demora:{
                etiqueta:"Demora",
                adaptativa:false,
                tipo:"numero",
                ayuda:"Permite establecer un tiempo de demora entre la navegación y la carga de la vista (segundos)."
            }
        }
    };

    /**
     * Devuelve la instancia del controlador de la vista que contiene.
     * @returns {controlador|null}
     */
    this.controlador=function() {
        return this.instanciaControlador;
    };

    /**
     * Devuelve la instancia de la vista que contiene.
     * @returns {componente|null}
     */
    this.vista=function() {
        if(this.nombreVista) return ui.obtenerInstanciaVista(this.nombreVista);
        return null;
    };

    /**
     * Devuelve el nombre de la vista que contiene.
     * @returns {string}
     */
    this.obtenerNombreVista=function() {
        return this.nombreVista;
    };

    /**
     * Inicializa la instancia tras ser creada o restaurada.
     */
    this.inicializar=function() {
        if(this.fueInicializado) return this; 
        this.inicializarComponente();
        return this;
    };

    /**
     * Crea el elemento del DOM para esta instancia.
     */
    this.crear=function() {
        this.elemento=document.crear("&lt;div>"); 
        this.crearComponente();
        return this;
    };

    /**
     * Evento Listo.
     */
    this.listo=function() {
        var vistaInicial=this.propiedad(null,"vista");
        if(vistaInicial) this.cargarVista(vistaInicial);
    };

    /**
     * Recepción de eventos externos.
     * @param {*} valor 
     * @param {Object} evento 
     */
    this.eventoExterno=function(valor,evento) {
        this.cargarVista(valor);
    };

    /**
     * Evento 'navegación'.
     * @param {string} nombreNuevaVista 
     */
    this.navegacion=function(nombreNuevaVista) {
        if(!this.propiedad(null,"escucharNavegacion")) return;
        
        var demora=this.propiedad(null,"demora");
        if(!demora) demora=0;

        var t=this;

        setTimeout(function() {
            //Si hemos vuelto a la vista principal, cargar el valor predeterminado
            if(nombreNuevaVista==ui.obtenerNombreVistaPrincipal()) nombreNuevaVista=t.propiedad(null,"vista");
            if(!nombreNuevaVista) return;        
            t.cargarVista(nombreNuevaVista);
        },demora*1000);
    };

    /**
     * Inicia la carga de una vista.
     * @param {string} nombre 
     * @returns {Componente}
     */
    this.cargarVista=function(nombre) {
        var t=this, 
            doc=ui.obtenerDocumento(),
            precarga=this.propiedad(null,"precarga");

        this.nombreVista=nombre;

        var fn=function() {
            ui.obtenerVistaEmbebible(nombre,function(obj) {
                t.elementoVista=doc.crear("&lt;div class='contenedor-vista-importada oculto'>");
                t.elementoVista.anexarA(t.elemento);

                ui.ejecutarVista(nombre,false,obj.json,obj.html,t.elementoVista,function() {
                    t.instanciaControlador=ui.obtenerInstanciaControladorVista(nombre);
                    ui.animarAparecer(t.elementoVista);
                });
            },precarga);
        };

        if(t.elementoVista) {
            var elem=t.elementoVista;
            ui.animarDesaparecer(elem,function() {
                elem.remover();
                fn();
            });
        } else {
            fn();
        }

        return this;
    };

    /**
     * Devuelve o establece los valores de la vista que contiene.
     * @param {Object} [valor] - Valores a establecer.
     * @reeturns {*}
     */
    this.valor=function(valor) {
        var vista=this.vista();
        
        if(typeof valor==="undefined") {
            if(vista) return vista.obtenerValores();
            return {};
        } else {
            if(vista) vista.establecerValores(valor);
            return this;
        }
    };

    /**
     * Devuelve los valores de la vista que contiene.
     * @returns {Object}
     */
    this.obtenerValores=function() {
        return;
        //No queremos que continúe la búsqueda en forma recursiva entre los componentes importados
    };
};

ui.registrarComponente("importar",componenteImportar,configComponente.clonar({
    descripcion:"Importar vista o archivo HTML",
    etiqueta:"Importar",
    grupo:"Control",
    icono:"importar.png",
    aceptaHijos:false
}));</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ajax.html">ajax</a></li><li><a href="aplicacion.html">aplicacion</a></li><li><a href="componente.html">componente</a></li><li><a href="componenteAgenda.html">componenteAgenda</a></li><li><a href="componenteAlternar.html">componenteAlternar</a></li><li><a href="componenteArbol.html">componenteArbol</a></li><li><a href="componenteArchivo.html">componenteArchivo</a></li><li><a href="componenteBoton.html">componenteBoton</a></li><li><a href="componenteBucle.html">componenteBucle</a></li><li><a href="componenteBuscador.html">componenteBuscador</a></li><li><a href="componenteCampo.html">componenteCampo</a></li><li><a href="componenteCheckbox.html">componenteCheckbox</a></li><li><a href="componenteCodigo.html">componenteCodigo</a></li><li><a href="componenteColumna.html">componenteColumna</a></li><li><a href="componenteColumnaTabla.html">componenteColumnaTabla</a></li><li><a href="componenteCondicional.html">componenteCondicional</a></li><li><a href="componenteContenedor.html">componenteContenedor</a></li><li><a href="componenteContenedorMenu.html">componenteContenedorMenu</a></li><li><a href="componenteDeslizable.html">componenteDeslizable</a></li><li><a href="componenteDesplegable.html">componenteDesplegable</a></li><li><a href="componenteDialogo.html">componenteDialogo</a></li><li><a href="componenteEspaciador.html">componenteEspaciador</a></li><li><a href="componenteEtiqueta.html">componenteEtiqueta</a></li><li><a href="componenteFecha.html">componenteFecha</a></li><li><a href="componenteFila.html">componenteFila</a></li><li><a href="componenteFilaTabla.html">componenteFilaTabla</a></li><li><a href="componenteFormulario.html">componenteFormulario</a></li><li><a href="componenteGrupoOpciones.html">componenteGrupoOpciones</a></li><li><a href="componenteHora.html">componenteHora</a></li><li><a href="componenteIcono.html">componenteIcono</a></li><li><a href="componenteImagen.html">componenteImagen</a></li><li><a href="componenteImportar.html">componenteImportar</a></li><li><a href="componenteItemMenu.html">componenteItemMenu</a></li><li><a href="componenteMenu.html">componenteMenu</a></li><li><a href="componenteNavegacion.html">componenteNavegacion</a></li><li><a href="componentePestana.html">componentePestana</a></li><li><a href="componentePestanas.html">componentePestanas</a></li><li><a href="componenteTabla.html">componenteTabla</a></li><li><a href="componenteTexto.html">componenteTexto</a></li><li><a href="componenteVista.html">componenteVista</a></li><li><a href="controlador.html">controlador</a></li><li><a href="editable.html">editable</a></li><li><a href="enrutador.html">enrutador</a></li><li><a href="enrutadorPredeterminado.html">enrutadorPredeterminado</a></li><li><a href="expresion.html">expresion</a></li><li><a href="servidor.html">servidor</a></li><li><a href="ui.html">ui</a></li><li><a href="util.html">util</a></li></ul><h3>Global</h3><ul><li><a href="global.html#componentes">componentes</a></li><li><a href="global.html#configComponente">configComponente</a></li><li><a href="global.html#controladores">controladores</a></li><li><a href="global.html#duracionAnimacion">duracionAnimacion</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Sun Sep 13 2020 11:31:03 GMT-0300 (GMT-03:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
